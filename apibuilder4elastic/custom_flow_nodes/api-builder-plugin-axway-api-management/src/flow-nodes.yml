flow-nodes:
  axway-api-management:
    name: Axway API-Management Utils
    icon: axway-logo.png
    description: Flow providing utility functions related to the Axway-API-Management solution. As of today it can be used to lookup a user in API-Gateway Manager and API-Manager to get a union view.
    category: general
    methods:
      lookupCurrentUser:
        name: Lookup current user
        description: Looks up the current user in Axway API-Gateway Manager and API-Manager based on the provided Request-Header that contains the session-cookie and CSRF-Token.
        parameters:
          requestHeaders:
            name: Request Headers
            description: The request headers are used to lookup the current users based on the current session cookie (VIDUSR).
            required: true
            initialType: string
            schema:
              type: string
          groupId:
            name: The API-Gateway Group-ID
            description: "The ID of the Domain-Group where this event was created. If given, it's used to determined which API-Manager to use. For that, the parameter: API_MANAGER must be configured like so: API_MANAGER=group-5#https://manager-1:8075, group-2#https://manager-2:8075, ...."
            required: true
            initialType: string
            schema:
              type: string
        outputs:
          next:
            name: Next
            description: The user was found in API-Gateway and API-Manager.
            context: $.user
            schema:
              type: object
          error:
            name: Error
            description: An unexpected error happened
            context: $.error
            schema:
              type: object
      lookupAPIDetails:
        name: Lookup API
        description: Looks up the details of an API based on the given API-Name and API-Path. Additionally, it returns the configured custom properties for that API.
        parameters:
          apiName:
            name: API-Name
            description: Name of the API is primary used to lookup the API
            required: true
            initialType: string
            schema:
              type: string
          apiPath:
            name: Path of the API
            description: This request path is used to double check that the API found is correct.
            required: true
            initialType: string
            schema:
              type: string
          groupId:
            name: The API-Gateway Group-ID
            description: "The ID of the Domain-Group where this event was created. If given, it's used to determined which API-Manager to use. For that, the parameter: API_MANAGER must be configured like so: API_MANAGER=group-5#https://manager-1:8075, group-2#https://manager-2:8075, ...."
            required: true
            initialType: string
            schema:
              type: string
          operationId:
            name: The ID of the operation
            description: This is ID of how the method is defined in the API-Definition. For instance updatePet
            required: false
            initialType: string
            schema:
              type: string
          mapCustomProperties:
            name: Map custom properties
            description: Turn this on to validate custom properties against the API-Manager configuration. Additionally, all found custom properties will be mapped into the properties customProperties
            required: false
            initialType: boolean
            schema:
              default: true
              type: boolean
        outputs:
          next:
            name: Next
            description: The API-Proxy how it's configured in the API-Manager incl. custom properties.
            context: $.api
            schema:
              type: object
          error:
            name: Error
            description: An unexpected error happened
            context: $.error
            schema:
              type: object